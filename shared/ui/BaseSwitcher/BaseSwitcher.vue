<script setup>
import './base-switcher.scss';

const props = defineProps({
  disabled: { type: Boolean, required: false, default: true },
  modelValue: { type: Boolean, required: false }
});

const emit = defineEmits(['update:modelValue', 'change']);

const isSwitcherActive = ref(props.modelValue);

watch(
  () => props.modelValue,
  (newVal) => {
    isSwitcherActive.value = newVal;
  }
);

const toggleSwitcher = () => {
  if (!props.disabled) return;
  isSwitcherActive.value = !isSwitcherActive.value;
  emit('update:modelValue', isSwitcherActive.value);
  emit('change', isSwitcherActive.value);
};
</script>

<template>
  <div class="switcher" :class="{ active: isSwitcherActive }" @click="toggleSwitcher">
    <svg
      width="10"
      height="10"
      viewBox="0 0 10 10"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="switcher__cross-btn"
    >
      <mask
        id="path-1-outside-1_2658_23537"
        maskUnits="userSpaceOnUse"
        x="0"
        y="0"
        width="10"
        height="10"
        fill="black"
      >
        <rect fill="white" width="10" height="10" />
        <path
          d="M5.33144 5.00162L8.93176 1.3927C9.02275 1.30183 9.02275 1.15903 8.93176 1.06815C8.84078 0.977282 8.69781 0.977282 8.60682 1.06815L5.0065 4.67708L1.39318 1.08114C1.30219 0.990264 1.15922 0.990264 1.06824 1.08114C0.977254 1.17201 0.977254 1.31481 1.06824 1.40568L4.68156 5.00162L1.08123 8.61055C0.990252 8.70142 0.990252 8.84422 1.08123 8.93509C1.12023 8.97404 1.18522 9 1.23721 9C1.2892 9 1.35418 8.97404 1.39318 8.93509L5.0065 5.32617L8.60682 8.93509C8.64582 8.97404 8.7108 9 8.76279 9C8.81479 9 8.87977 8.97404 8.91877 8.93509C9.00975 8.84422 9.00975 8.70142 8.91877 8.61055L5.33144 5.00162Z"
        />
      </mask>
      <path
        d="M5.33144 5.00162L8.93176 1.3927C9.02275 1.30183 9.02275 1.15903 8.93176 1.06815C8.84078 0.977282 8.69781 0.977282 8.60682 1.06815L5.0065 4.67708L1.39318 1.08114C1.30219 0.990264 1.15922 0.990264 1.06824 1.08114C0.977254 1.17201 0.977254 1.31481 1.06824 1.40568L4.68156 5.00162L1.08123 8.61055C0.990252 8.70142 0.990252 8.84422 1.08123 8.93509C1.12023 8.97404 1.18522 9 1.23721 9C1.2892 9 1.35418 8.97404 1.39318 8.93509L5.0065 5.32617L8.60682 8.93509C8.64582 8.97404 8.7108 9 8.76279 9C8.81479 9 8.87977 8.97404 8.91877 8.93509C9.00975 8.84422 9.00975 8.70142 8.91877 8.61055L5.33144 5.00162Z"
        fill="currentColor"
      />
      <path
        d="M5.33144 5.00162L8.93176 1.3927C9.02275 1.30183 9.02275 1.15903 8.93176 1.06815C8.84078 0.977282 8.69781 0.977282 8.60682 1.06815L5.0065 4.67708L1.39318 1.08114C1.30219 0.990264 1.15922 0.990264 1.06824 1.08114C0.977254 1.17201 0.977254 1.31481 1.06824 1.40568L4.68156 5.00162L1.08123 8.61055C0.990252 8.70142 0.990252 8.84422 1.08123 8.93509C1.12023 8.97404 1.18522 9 1.23721 9C1.2892 9 1.35418 8.97404 1.39318 8.93509L5.0065 5.32617L8.60682 8.93509C8.64582 8.97404 8.7108 9 8.76279 9C8.81479 9 8.87977 8.97404 8.91877 8.93509C9.00975 8.84422 9.00975 8.70142 8.91877 8.61055L5.33144 5.00162Z"
        stroke="currentColor"
        stroke-width="0.8"
        mask="url(#path-1-outside-1_2658_23537)"
      />
    </svg>
    <svg
      width="11"
      height="8"
      viewBox="0 0 11 8"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="switcher__checkmark-btn"
    >
      <path
        d="M10.0915 0.951972L10.0867 0.946075L10.0813 0.940568C9.90076 0.753564 9.61034 0.753146 9.42927 0.939309L4.16201 6.22962L1.58507 3.63469C1.40401 3.44841 1.11351 3.44879 0.932892 3.63584C0.755703 3.81933 0.755703 4.10875 0.932892 4.29224L0.932878 4.29225L0.934851 4.29424L3.58046 6.95832C3.73676 7.11955 3.94983 7.2 4.1473 7.2C4.36196 7.2 4.55963 7.11773 4.71406 6.9584L10.0468 1.60234C10.2436 1.4199 10.2421 1.1339 10.0915 0.951972ZM4.2327 6.30081L4.2317 6.2998C4.23206 6.30015 4.23237 6.30049 4.23269 6.30082L4.2327 6.30081Z"
        fill="currentColor"
        stroke="currentColor"
        stroke-width="0.4"
      />
    </svg>
  </div>
</template>
